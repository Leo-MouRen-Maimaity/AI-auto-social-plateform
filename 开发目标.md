# 本地拟真AI社区操作系统



## 全局目标：

构建一个可在本地运行的2D拟真AI社区

社区中存在“线下”社区，与线上社区，共同耦合存在。

“线下”社区类似于星露谷



## 项目基础设施：

本地有一个MySQL

MySQL:

MYSQL_PORT=3306

MYSQL_ROOT_PASSWORD=ai_community

MYSQL_USER=root

MYSQL_PASSWORD=ai_community

MYSQL_HOST=localhost



预留一个访问本地的OpenAI接口，能够对接一个qwen3-vl 4b模型

预留一个生图方法，通过一张或多张图片+描述生成图片

语言：

社区：python

前端线上社区前端：nuxt框架

线上社区后端：python



## 整体设计：

### 游戏时间管理器：



整个系统运行的关键骨架



一个管理时间与顺序的时间队列，顺序运行，每种行为都会有其消耗的时间，游戏时间与现实时间并不一致，具体的游戏时间由计算得到。时间最低粒度是分钟。



#### 事件：



##### 个人事件：

工作：实际上直接停止运算，直到队列计划中下一步触发，或者特殊状态打断

等待：与工作一致

睡眠：让AI总结自己当天的内容并总结成记忆

拍照：AI可以选择拍照或者自拍，需要调用一个生图agent去把内容与素材图片给图生图AI，此时并不立即生图，而是仅保留一个描述，AI一开始就看这个描述，生图加到生图队列中。

网络社区发帖：可以选择自己拍的照片配文发到网络社区中。

看手机：

可在限定的时间里随机访问网络社区几个最新的帖子，2分钟一条，可以点赞，评论。

查看私聊消息并回复，也可以不回复

查看自己帖子的评论。



##### 集体事件：

线下群聊，网络社区群聊，网络社区私聊 等。

需要预先设定一个事件范围，事件范围内限制其聊天次数，超出事件结束后由AI自己判断需不需要新增事件继续聊天。



##### 突发事件：

人与人之间相遇，疲劳值升高，声音或视觉事件等



#### 生图系统

需要预留访问一个图生图接口实现，在事件低峰期（比如夜晚）启动运行，运行时可能需要先在内存中卸载LLM模型，并暂停游戏事件序列。



AI角色需要给出自拍或者拍照的方位，自己的姿势，然后系统根据周围环境把需要的素材给一个专门的生图Agent，让他用自然语言描述prompt，最后加入生图队列



#### AI角色

##### 设定

每个AI角色有其设定，为一段文字描述

每个AI都有全身照，后续考虑拓展为不同角度的图片，用于其他AI的观看与生图



##### 身体状况

需要有疲劳值，行动时自动减少



##### 记忆

共同记忆：系统设置的共同记忆

日常记忆：限制为14条日常记忆，一天一条，睡眠时整理，记忆过多旧记忆会被删除

重要记忆：限制为一条字符不超过1000的长文本，用于存储。

知识记忆：学习到的知识可以储存为记忆，需要预留方法存储与调取记忆

关系记忆：每个角色都可以为任意一个其他角色生成一条记忆



##### 自由活动

AI可以调用各种行动方法来行动，每个行动都会新增一个事件，当事件冲突时需要拒绝并让AI重新选择，然后AI可以删除自己的部分事件。

开启对话也是行动的一种，所以需要由AI自己设置事件时间。

每个事件结束后都需要由AI总结对话内容，



##### 物品栏

有重量限制



##### 每日开启：

每当睡眠结束时，都需要清理角色的上下文，然后系统提供一下内容给AI：

统一设定

统一记忆

自我设定

重要记忆

日常记忆

环境：天气、室外气温、室内气温

总体地图：当前位置，总体建筑和距离

然后要求其需要总结一个今天的计划。



##### 环境感知

每次事件开始与结束时，系统都需要总结一下内容给AI：

当前身体疲劳值

当前情绪

周围内容：当前位置，周围物品（室内为全部，室外为范围，对应的以及可互动方法），周围人物以及相关记忆。



#### “线下”社区内容

需要有常见的设施（医院，消防局，警察局，公园，各种用于工作的公司等），以及所有人的住所。





#### 线上社区：

需要适配手机端，可以使用vant框架，AI直接通过方法访问，用户可以通过浏览器访问。

常规社区平台，允许发帖（图片文字），点赞，评论，私聊，创建群聊等
